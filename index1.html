<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙŠÙ‚ÙŠÙ† | ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #064e3b;
            --secondary: #10b981;
            --accent: #f59e0b;
            --bg: #f1f5f9;
            --card: #ffffff;
            --text: #1e293b;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .dark-mode {
            --bg: #0f172a;
            --card: #1e293b;
            --text: #f1f5f9;
            --primary: #34d399;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0;
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            transition: background 0.3s ease;
        }

        header {
            background: var(--primary); color: white;
            padding: 15px 20px; display: flex;
            justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .container { max-width: 600px; margin: 0 auto; padding: 20px; }

        #startScreen {
            height: 100vh; width: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white; position: fixed; top: 0; left: 0; z-index: 2000;
        }

        #startScreen h1 { font-size: 48px; margin-bottom: 10px; font-weight: 800; }
        .enter-btn {
            background: white; color: var(--primary);
            padding: 15px 60px; border-radius: 50px;
            font-size: 22px; font-weight: bold; border: none;
            cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .page { display: none; animation: slideUp 0.4s ease-out; }
        .page.active { display: block; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .main-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .menu-item {
            background: var(--card); padding: 25px 15px;
            border-radius: 20px; text-align: center; cursor: pointer;
            box-shadow: var(--shadow); border: 1px solid rgba(0,0,0,0.05);
        }
        .menu-item span { font-weight: 700; font-size: 18px; }

        .content-card { background: var(--card); padding: 20px; border-radius: 20px; margin-bottom: 15px; box-shadow: var(--shadow); }
        .quran-view { font-family: 'Amiri', serif; font-size: 26px; line-height: 2.2; text-align: justify; padding: 20px; max-height: 60vh; overflow-y: auto; }
        .surah-select, .tasbeeh-select { width: 100%; padding: 15px; border-radius: 12px; font-family: 'Tajawal'; font-size: 16px; margin-bottom: 20px; border: 2px solid var(--secondary); background: var(--card); color: var(--text); }

        .tasbeeh-container { text-align: center; padding: 20px 0; }
        .circle {
            width: 200px; height: 200px;
            border: 10px solid var(--secondary); border-radius: 50%;
            margin: 0 auto 20px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; cursor: pointer;
            background: var(--card); box-shadow: var(--shadow);
        }
        .circle h2 { font-size: 50px; margin: 0; }

        .btn-back { background: #64748b; color: white; border: none; padding: 10px 20px; border-radius: 10px; cursor: pointer; margin-bottom: 20px; font-weight: bold; }
        .btn-reset { background: #ef4444; color: white; border: none; padding: 12px 30px; border-radius: 12px; cursor: pointer; font-weight: bold; }
        .zikr-box { border-right: 4px solid var(--secondary); background: var(--bg); padding: 15px; margin-bottom: 10px; border-radius: 0 10px 10px 0; font-size: 17px; line-height: 1.6; }
        .zikr-box span { display: block; color: var(--secondary); font-weight: bold; font-size: 14px; margin-top: 5px; }

        audio { width: 100%; margin-top: 15px; border-radius: 10px; }
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; background: #000; border-radius: 12px; margin-bottom: 15px; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        
        .prayer-time-row { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee; }
        .todo-item { display: flex; align-items: center; gap: 10px; padding: 10px; border-bottom: 1px solid #eee; }
        #ramadanTimer { background: #f59e0b; color: #fff; padding: 10px; border-radius: 10px; margin-bottom: 15px; font-weight: bold; text-align: center; }
    </style>
</head>
<body>

<div id="startScreen">
    <h1>ÙŠÙÙ‚ÙÙŠÙ†</h1>
    <p>Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†Ù‘Ù Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù</p>
    <button class="enter-btn" onclick="startApp()">Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</button>
</div>

<header id="mainHeader" style="display: none;">
    <span style="font-weight: 800; font-size: 22px;">ğŸŒ™ ÙŠÙÙ‚ÙÙŠÙ†</span>
    <button onclick="toggleDark()" style="background:none; border:none; font-size: 24px; cursor:pointer;">ğŸŒ“</button>
</header>

<div class="container" id="appContent" style="display: none;">

    <div id="homePage" class="page active">
        <div id="ramadanTimer" style="display:none;"></div>
        <div class="content-card" style="background: var(--primary); color: white; text-align: center; cursor: pointer;" onclick="showTafsir()">
            <p id="dailyVerse">"ÙÙØ¥ÙÙ†Ù‘Ù Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§"</p>
            <small id="tafsirText" style="display:none; font-size: 14px; opacity: 0.9;"></small>
        </div>

        <div class="main-menu">
            <div class="menu-item" onclick="showPage('quranPage')">ğŸ“– <span>Ø§Ù„Ù‚Ø±Ø¢Ù†</span></div>
            <div class="menu-item" onclick="showPage('azkarMorning')">ğŸŒ… <span>Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</span></div>
            <div class="menu-item" onclick="showPage('azkarEvening')">ğŸŒ‡ <span>Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</span></div>
            <div class="menu-item" onclick="showPage('tasbeehPage')">ğŸ“¿ <span>Ø§Ù„Ø³Ø¨Ø­Ø©</span></div>
            <div class="menu-item" onclick="showPage('duaPage')">ğŸ™ <span>Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©</span></div>
            <div class="menu-item" onclick="showPage('ramadanPage')">â­ <span>Ø£Ù‡Ø¯Ø§Ù Ø±Ù…Ø¶Ø§Ù†</span></div>
            <div class="menu-item" onclick="getPrayerTimes()">ğŸ•Œ <span>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</span></div>
            <div class="menu-item" onclick="showPage('todoPage')">âœ… <span>Ù…Ù‡Ø§Ù…ÙŠ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</span></div>
            <div class="menu-item" onclick="showPage('hifzPage')" style="grid-column: span 2;">ğŸ’¡ <span>Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø­ÙØ¸</span></div>
        </div>
    </div>

    <div id="azkarMorning" class="page">
        <button class="btn-back" onclick="showPage('homePage')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <h2>ğŸŒ… Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</h2>
        <div class="content-card">
            <div class="zikr-box">Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ... <span>(Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©)</span></div>
            <div class="zikr-box">Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ + Ø§Ù„ÙÙ„Ù‚ + Ø§Ù„Ù†Ø§Ø³ <span>(3 Ù…Ø±Ø§Øª)</span></div>
            <div class="zikr-box">Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§ØŒ ÙˆØ¨Ùƒ Ø£Ù…Ø³ÙŠÙ†Ø§ØŒ ÙˆØ¨Ùƒ Ù†Ø­ÙŠØ§ØŒ ÙˆØ¨Ùƒ Ù†Ù…ÙˆØªØŒ ÙˆØ¥Ù„ÙŠÙƒ Ø§Ù„Ù†Ø´ÙˆØ±.</div>
            <div class="zikr-box">Ø³ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØºÙØ§Ø±... <span>(Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©)</span></div>
            <div class="zikr-box">Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠØ¶Ø± Ù…Ø¹ Ø§Ø³Ù…Ù‡ Ø´ÙŠØ¡... <span>(3 Ù…Ø±Ø§Øª)</span></div>
            <div class="zikr-box">Ø±Ø¶ÙŠØª Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ø§Ù‹ØŒ ÙˆØ¨Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¯ÙŠÙ†Ø§Ù‹ØŒ ÙˆØ¨Ù…Ø­Ù…Ø¯ ï·º Ù†Ø¨ÙŠØ§Ù‹. <span>(3 Ù…Ø±Ø§Øª)</span></div>
            <div class="zikr-box">Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡... <span>(100 Ù…Ø±Ø©)</span></div>
            <div class="zikr-box">Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡. <span>(100 Ù…Ø±Ø©)</span></div>
            <div class="zikr-box">Ø§Ù„Ù„Ù‡Ù… ØµÙ„ ÙˆØ³Ù„Ù… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯. <span>(10 Ù…Ø±Ø§Øª)</span></div>
            <div class="zikr-box">Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¹ÙÙˆ ÙˆØ§Ù„Ø¹Ø§ÙÙŠØ©...</div>
        </div>
    </div>

    <div id="azkarEvening" class="page">
        <button class="btn-back" onclick="showPage('homePage')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <h2>ğŸŒ‡ Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</h2>
        <div class="content-card">
            <div class="zikr-box">Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ <span>(Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©)</span></div>
            <div class="zikr-box">Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ + Ø§Ù„ÙÙ„Ù‚ + Ø§Ù„Ù†Ø§Ø³ <span>(3 Ù…Ø±Ø§Øª)</span></div>
            <div class="zikr-box">Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£Ù…Ø³ÙŠÙ†Ø§ØŒ ÙˆØ¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§...</div>
            <div class="zikr-box">Ø³ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØºÙØ§Ø±... <span>(Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©)</span></div>
            <div class="zikr-box">Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠØ¶Ø± Ù…Ø¹ Ø§Ø³Ù…Ù‡ Ø´ÙŠØ¡... <span>(3 Ù…Ø±Ø§Øª)</span></div>
            <div class="zikr-box">Ø±Ø¶ÙŠØª Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ø§Ù‹... <span>(3 Ù…Ø±Ø§Øª)</span></div>
            <div class="zikr-box">Ø£Ù…Ø³ÙŠÙ†Ø§ ÙˆØ£Ù…Ø³Ù‰ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡...</div>
            <div class="zikr-box">Ø£Ø¹ÙˆØ° Ø¨ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù„Ù‡ Ø§Ù„ØªØ§Ù…Ø§Øª... <span>(3 Ù…Ø±Ø§Øª)</span></div>
            <div class="zikr-box">Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡. <span>(100 Ù…Ø±Ø©)</span></div>
            <div class="zikr-box">Ø§Ù„Ù„Ù‡Ù… ØµÙ„ ÙˆØ³Ù„Ù… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯. <span>(10 Ù…Ø±Ø§Øª)</span></div>
        </div>
    </div>

    <div id="quranPage" class="page">
        <button class="btn-back" onclick="showPage('homePage')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <select id="surahSelect" class="surah-select" onchange="getSurahData()">
            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©...</option>
        </select>
        
        <div id="audioContainer" class="content-card" style="display:none; text-align:center;">
            <span id="audioTitle" style="font-weight:bold; display:block; margin-bottom:10px;"></span>
            <audio id="surahAudio" controls>
                <source src="" type="audio/mpeg">
            </audio>
        </div>

        <div id="quranBox" class="content-card quran-view">
            Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© Ù„ØªØ¨Ø¯Ø£ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ù„Ø§Ø³ØªÙ…Ø§Ø¹...
        </div>
    </div>

    <div id="duaPage" class="page">
        <button class="btn-back" onclick="showPage('homePage')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <h2>ğŸ™ Ø£Ø¯Ø¹ÙŠØ© Ù†Ø¨ÙˆÙŠØ©</h2>
        <div class="content-card">
            <div class="zikr-box"><b>Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ù‡Ù… ÙˆØ§Ù„Ø­Ø²Ù†:</b> "Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø§Ù„Ù‡Ù… ÙˆØ§Ù„Ø­Ø²Ù†..."</div>
            <div class="zikr-box"><b>Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ…:</b> "Ø¨Ø§Ø³Ù…Ùƒ Ø±Ø¨ÙŠ ÙˆØ¶Ø¹Øª Ø¬Ù†Ø¨ÙŠ..."</div>
            <div class="zikr-box"><b>Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø­Ø§Ø¬Ø©:</b> "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø­Ù„ÙŠÙ… Ø§Ù„ÙƒØ±ÙŠÙ…..."</div>
        </div>
    </div>

    <div id="ramadanPage" class="page">
        <button class="btn-back" onclick="showPage('homePage')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <h3>ğŸ¯ Ø£Ù‡Ø¯Ø§Ù Ø±Ù…Ø¶Ø§Ù†</h3>
        <div class="content-card">
            <h4>1- Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ù†Ø¨ÙˆÙŠØ© (Ø£Ø­Ù…Ø¯ Ø¹Ø§Ù…Ø±)</h4>
            <div class="video-container"><iframe src="https://www.youtube.com/embed/playlist?list=PLATApN30c4aLXpHzO1GkEb9H0CeXaJFy9"></iframe></div>
        </div>
        <div class="content-card">
            <h4>2- Ø§Ù„Ù…Ø¹Ø§Ø±Ùƒ Ø§Ù„ÙƒØ¨Ø±Ù‰ (Ø³Ù…ÙŠØ± Ù…ØµØ·ÙÙ‰)</h4>
            <div class="video-container"><iframe src="https://www.youtube.com/embed/playlist?list=PL09AC5B8EC7B3803A"></iframe></div>
        </div>
        <div class="content-card">
            <h4>ğŸ“ Ø£Ù‡Ø¯Ø§ÙÙŠ Ø§Ù„Ø®Ø§ØµØ©</h4>
            <textarea id="myGoals" style="width:100%; height:80px; padding:10px; border-radius:10px; border:1px solid #ddd;" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ù…Ø§ ØªØ±ÙŠØ¯ ØªØ­Ù‚ÙŠÙ‚Ù‡..."></textarea>
            <button onclick="saveGoals()" style="margin-top:10px; width:100%; padding:10px; background:var(--primary); color:white; border:none; border-radius:10px;">Ø­ÙØ¸</button>
        </div>
    </div>

    <div id="tasbeehPage" class="page">
        <button class="btn-back" onclick="showPage('homePage')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <div class="tasbeeh-container">
            <select id="tasbeehSelect" class="tasbeeh-select" onchange="changeZikr()">
                <option value="Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡</option>
                <option value="Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡">Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡</option>
                <option value="Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±">Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±</option>
                <option value="Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡">Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡</option>
            </select>
            <div class="circle" onclick="pressTasbeeh()"><h2 id="counter">0</h2><span id="tasbeehLabel">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡</span></div>
            <button class="btn-reset" onclick="resetT()">ØªØµÙÙŠØ±</button>
        </div>
    </div>

    <div id="prayerPage" class="page">
        <button class="btn-back" onclick="showPage('homePage')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <h2>ğŸ•Œ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© (Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©)</h2>
        <div class="content-card" id="prayerTimesBox">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    </div>

    <div id="todoPage" class="page">
        <button class="btn-back" onclick="showPage('homePage')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <h2>âœ… Ù…Ù‡Ø§Ù…ÙŠ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h2>
        <div class="content-card" id="todoList">
            <div class="todo-item"><input type="checkbox" id="t1"> <label for="t1">Ù‚Ø±Ø§Ø¡Ø© ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±Ø¢Ù†</label></div>
            <div class="todo-item"><input type="checkbox" id="t2"> <label for="t2">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ ÙˆØ§Ù„Ù…Ø³Ø§Ø¡</label></div>
            <div class="todo-item"><input type="checkbox" id="t3"> <label for="t3">Ø§Ù„ØµÙ„ÙˆØ§Øª Ø§Ù„Ø®Ù…Ø³</label></div>
        </div>
    </div>

    <div id="hifzPage" class="page">
        <button class="btn-back" onclick="showPage('homePage')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <h2>ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø­ÙØ¸</h2>
        <div class="content-card">
            <ul>
                <li>ÙƒØ±Ø± Ø§Ù„Ø¢ÙŠØ© 10 Ù…Ø±Ø§Øª.</li>
                <li>Ø§Ø³ØªÙ…Ø¹ Ù„Ù„Ø³ÙˆØ±Ø© ÙƒØ«ÙŠØ±Ø§Ù‹.</li>
                <li>Ø§Ø­ÙØ¸ Ù…Ø¹ ØµØ¯ÙŠÙ‚ Ù„ØªØ´Ø¬ÙŠØ¹ Ø¨Ø¹Ø¶ÙƒÙ…Ø§.</li>
            </ul>
        </div>
    </div>

</div>

<script>
    // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (ÙƒÙ…Ø§ Ù‡ÙŠ ÙÙŠ ÙƒÙˆØ¯Ùƒ)
    function startApp() {
        document.getElementById('startScreen').style.display = 'none';
        document.getElementById('mainHeader').style.display = 'flex';
        document.getElementById('appContent').style.display = 'block';
        loadSurahNames();
        updateRamadanTimer();
        loadMyGoals();
        loadDailyVerse();
    }

    function showPage(pageId) {
        if (pageId !== 'homePage') {
            history.pushState({ page: pageId }, "");
        }
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        window.scrollTo(0,0);
    }

    // ÙˆØ¸ÙŠÙØ© ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø³ÙˆØ± (Ù…Ù† ÙƒÙˆØ¯Ùƒ)
    async function loadSurahNames() {
        const select = document.getElementById('surahSelect');
        try {
            const r = await fetch('https://api.alquran.cloud/v1/surah');
            const d = await r.json();
            d.data.forEach(s => {
                const opt = document.createElement('option');
                opt.value = s.number; 
                opt.text = s.number + ". " + s.name;
                select.add(opt);
            });
        } catch(e) {}
    }

    // ÙˆØ¸ÙŠÙØ© Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø© ÙˆØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª (Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© Ù„Ø±Ø¨Ø· Ø§Ù„ØµÙˆØª Ø¨Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚)
    async function getSurahData() {
        const val = document.getElementById('surahSelect').value;
        const select = document.getElementById('surahSelect');
        if(!val) return;

        const quranBox = document.getElementById('quranBox');
        const audioContainer = document.getElementById('audioContainer');
        const audioTitle = document.getElementById('audioTitle');
        const surahAudio = document.getElementById('surahAudio');

        quranBox.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
        
        // ØªÙØ¹ÙŠÙ„ Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØª ÙˆØ±Ø¨Ø· Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
        audioContainer.style.display = "block";
        audioTitle.innerText = "Ø§Ø³ØªÙ…Ø§Ø¹ Ø¥Ù„Ù‰: " + select.options[select.selectedIndex].text;
        surahAudio.src = `https://server8.mp3quran.net/afs/${val.padStart(3, '0')}.mp3`;

        // Ù…ÙŠØ²Ø© Ø§Ù„Ø£ÙˆÙÙ„Ø§ÙŠÙ† (Ù…Ù† ÙƒÙˆØ¯Ùƒ Ø§Ù„Ø£ØµÙ„ÙŠ)
        const localData = localStorage.getItem('surah_' + val);
        if (localData) {
            quranBox.innerHTML = localData + "<br><p style='color:green; font-size:12px;'>âœ“ Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙˆØ±Ø© ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</p>";
        }

        try {
            const response = await fetch(`https://api.alquran.cloud/v1/surah/${val}`);
            const data = await response.json();
            let fullText = "";
            data.data.ayahs.forEach(a => {
                fullText += a.text + ` <span style="color:var(--secondary)">ï´¿${a.numberInSurah}ï´¾</span> `;
            });

            localStorage.setItem('surah_' + val, fullText);
            quranBox.innerHTML = fullText;

        } catch (error) {
            if (!localData) {
                quranBox.innerText = "Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙˆØ±Ø© ØªØ­ØªØ§Ø¬ Ø¥Ù†ØªØ±Ù†Øª Ù„ÙØªØ­Ù‡Ø§ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø© ÙÙ‚Ø·.";
            }
        }
    }

    // Ø¨Ø§Ù‚ÙŠ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (ÙƒÙ…Ø§ Ù‡ÙŠ ÙÙŠ ÙƒÙˆØ¯Ùƒ)
    function updateRamadanTimer() {
        const now = new Date();
        const ramadanDate = new Date("March 1, 2025 00:00:00").getTime();
        const diff = ramadanDate - now.getTime();
        const el = document.getElementById('ramadanTimer');
        if (diff > 0) {
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            el.innerHTML = `â³ Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø±Ù…Ø¶Ø§Ù†: ${days} ÙŠÙˆÙ…`;
            el.style.display = "block";
        }
    }

    const dailyVerses = [
        {a: "ÙÙØ¥ÙÙ†Ù‘Ù Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§", t: "ØªÙØ³ÙŠØ±: Ø§Ù„Ù„Ù‡ ÙŠØ¹Ø¯Ùƒ Ø¨Ø§Ù„ÙŠØ³Ø± Ø¨Ø¹Ø¯ ÙƒÙ„ Ø¶ÙŠÙ‚."},
        {a: "Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†Ù‘Ù Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù", t: "ØªÙØ³ÙŠØ±: Ø·Ù…Ø£Ù†ÙŠÙ†Ø© Ø§Ù„Ù‚Ù„Ø¨ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ Ø°ÙƒØ± Ø§Ù„Ù„Ù‡."}
    ];

    function loadDailyVerse() {
        const item = dailyVerses[Math.floor(Math.random() * dailyVerses.length)];
        document.getElementById('dailyVerse').innerText = item.a;
        document.getElementById('tafsirText').innerText = item.t;
    }

    function showTafsir() {
        const t = document.getElementById('tafsirText');
        t.style.display = t.style.display === 'none' ? 'block' : 'none';
    }

    async function getPrayerTimes() {
        showPage('prayerPage');
        const box = document.getElementById('prayerTimesBox');
        try {
            const r = await fetch('https://api.aladhan.com/v1/timingsByCity?city=Cairo&country=Egypt&method=5');
            const d = await r.json();
            const t = d.data.timings;
            box.innerHTML = `
                <div class="prayer-time-row"><span>Ø§Ù„ÙØ¬Ø±</span> <b>${t.Fajr}</b></div>
                <div class="prayer-time-row"><span>Ø§Ù„Ø¸Ù‡Ø±</span> <b>${t.Dhuhr}</b></div>
                <div class="prayer-time-row"><span>Ø§Ù„Ø¹ØµØ±</span> <b>${t.Asr}</b></div>
                <div class="prayer-time-row"><span>Ø§Ù„Ù…ØºØ±Ø¨</span> <b>${t.Maghrib}</b></div>
                <div class="prayer-time-row"><span>Ø§Ù„Ø¹Ø´Ø§Ø¡</span> <b>${t.Isha}</b></div>
            `;
        } catch(e) { box.innerHTML = "ØªØ¹Ø°Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„."; }
    }

    let count = localStorage.getItem('count') || 0;
    document.getElementById('counter').innerText = count;
    function pressTasbeeh() {
        count++;
        document.getElementById('counter').innerText = count;
        localStorage.setItem('count', count);
        if(navigator.vibrate) navigator.vibrate(50);
    }
    function resetT() { count = 0; document.getElementById('counter').innerText = 0; localStorage.setItem('count', 0); }
    function changeZikr() { document.getElementById('tasbeehLabel').innerText = document.getElementById('tasbeehSelect').value; }
    function toggleDark() { document.body.classList.toggle('dark-mode'); }
    function saveGoals() { localStorage.setItem('userGoals', document.getElementById('myGoals').value); alert("ØªÙ… Ø§Ù„Ø­ÙØ¸!"); }
    function loadMyGoals() { document.getElementById('myGoals').value = localStorage.getItem('userGoals') || ""; }

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù€ Service Worker (Ø£ÙˆÙÙ„Ø§ÙŠÙ†)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(err => console.log(err));
      });
    }
</script>

</body>
</html>